# Настройка Wake Word "Зиночка!"

## Что такое Wake Word?

Wake word (пробуждающее слово) - это специальная команда, которая активирует голосового ассистента без необходимости нажимать кнопки. В нашем случае это слово **"Зиночка!"**.

---

## Требования

- **Android смартфон** с установленным Tasker
- **AutoVoice** (плагин для Tasker)
- **Микрофон** на смартфоне
- **Интернет** (для облачного распознавания)

---

## Шаг 1: Установка AutoVoice

1. Откройте Google Play Store
2. Найдите "AutoVoice"
3. Установите приложение (разработчик: joaomgcd)
4. Откройте AutoVoice
5. Предоставьте все необходимые разрешения:
   - Доступ к микрофону
   - Запуск в фоновом режиме
   - Доступ к специальным возможностям (Accessibility)

---

## Шаг 2: Настройка AutoVoice Continuous

AutoVoice Continuous - это режим постоянного прослушивания wake word.

### 2.1. Активация Continuous Mode

1. Откройте приложение **AutoVoice**
2. Перейдите в **"Continuous"**
3. Включите **"Enable Continuous"**
4. Выберите язык: **Russian (ru-RU)**

### 2.2. Настройка Wake Phrase

1. В разделе **"Continuous"** найдите **"Wake Phrase"**
2. Нажмите на поле ввода
3. Введите: **зиночка** (строчными буквами)
4. Нажмите **"Save"**

### 2.3. Настройка чувствительности

1. Найдите параметр **"Sensitivity"**
2. Рекомендуемое значение: **Medium** (средняя чувствительность)
3. Если срабатывает слишком часто - уменьшите до **Low**
4. Если не срабатывает - увеличьте до **High**

### 2.4. Дополнительные параметры

```
Use Google Now Recognizer: ✓ (включено)
Use Screen On Recognition: ✓ (включено)
Use Screen Off Recognition: ✓ (включено, для работы с заблокированным экраном)
Timeout: 5000 ms
Language: Russian (ru-RU)
```

---

## Шаг 3: Настройка Tasker Profile для Wake Word

Теперь создадим профиль в Tasker, который будет реагировать на wake word.

### 3.1. Создание Profile

1. Откройте **Tasker**
2. Перейдите на вкладку **PROFILES**
3. Нажмите **"+"** (внизу справа)
4. Выберите **Event** → **Plugin** → **AutoVoice Recognized**

### 3.2. Конфигурация AutoVoice Event

1. Нажмите на иконку **редактирования** (карандаш)
2. В поле **"Command Filter"** введите: **зиночка**
3. Включите **"Exact"** (точное совпадение)
4. Включите **"Use Regex"**: OFF
5. Язык: **Russian (ru-RU)**
6. Нажмите **✓** (галочка) для сохранения

### 3.3. Связывание с Task

1. После создания события Tasker спросит: "New Task or Existing Task?"
2. Выберите **"Existing Task"**
3. Найдите в списке: **"Zinocha Activated"**
4. Нажмите **✓** для сохранения

Теперь при произнесении "Зиночка!" будет запускаться Task "Zinocha Activated", который покажет диалог выбора режима ввода.

---

## Шаг 4: Проверка работы Wake Word

### 4.1. Базовая проверка

1. Убедитесь, что AutoVoice Continuous включён (зелёная иконка в панели уведомлений)
2. Скажите громко и чётко: **"Зиночка!"**
3. Должен воспроизвестись звук активации (если вы создали файл listening.mp3)
4. Должен появиться диалог с выбором режима ввода

### 4.2. Проверка с заблокированным экраном

1. Заблокируйте экран смартфона
2. Скажите: **"Зиночка!"**
3. Экран должен разблокироваться и появиться диалог

### 4.3. Что делать, если не работает?

**Проблема**: Wake word не срабатывает

**Решения**:
1. Проверьте, что AutoVoice Continuous включён (зелёная иконка)
2. Убедитесь, что микрофон работает (проверьте в диктофоне)
3. Увеличьте чувствительность в настройках AutoVoice
4. Проверьте, что язык установлен на Russian (ru-RU)
5. Попробуйте произнести громче и чётче

**Проблема**: Срабатывает на посторонние звуки

**Решения**:
1. Уменьшите чувствительность в AutoVoice
2. Включите "Exact" match в настройках события
3. Убедитесь, что wake phrase написан правильно: "зиночка"

**Проблема**: Не работает с заблокированным экраном

**Решения**:
1. В AutoVoice включите "Use Screen Off Recognition"
2. Добавьте AutoVoice в исключения оптимизации батареи:
   - Настройки → Батарея → Оптимизация батареи
   - Выберите "Все приложения"
   - Найдите AutoVoice → Не оптимизировать
3. Предоставьте AutoVoice разрешение "Показывать поверх других окон"

---

## Шаг 5: Оптимизация батареи

Постоянное прослушивание может расходовать батарею. Вот несколько советов:

### 5.1. Настройки AutoVoice

```
Use Google Now Recognizer: ✓
Timeout: 5000 ms (не увеличивайте без необходимости)
Sensitivity: Medium (высокая чувствительность потребляет больше энергии)
```

### 5.2. Исключения Android

1. **Батарея**:
   - Настройки → Батарея → Оптимизация батареи
   - AutoVoice → Не оптимизировать
   - Tasker → Не оптимизировать

2. **Фоновая активность**:
   - Настройки → Приложения → AutoVoice → Батарея
   - Установите "Неограниченно"

3. **Автозапуск**:
   - Настройки → Приложения → AutoVoice → Разрешения
   - Включите "Автозапуск" (если есть)

### 5.3. Расход батареи

При правильной настройке AutoVoice Continuous расходует:
- **~2-5% батареи в день** (при средней чувствительности)
- **~5-10% батареи в день** (при высокой чувствительности)

---

## Шаг 6: Альтернативные варианты активации

Если постоянное прослушивание расходует слишком много батареи, есть альтернативы:

### Вариант 1: Кнопка запуска с виджета

Используйте виджет Tasker на главном экране (создан в docs/voice_assistant_setup.md).

### Вариант 2: Быстрая настройка (Quick Settings)

1. В Tasker создайте **Quick Settings Tile**
2. Привяжите его к Task "Zinocha Activated"
3. Теперь можно активировать ассистента из шторки уведомлений

### Вариант 3: Жест или кнопка устройства

1. В Tasker создайте профиль на событие:
   - Долгое нажатие кнопки громкости
   - Встряхивание устройства
   - Другой жест
2. Привяжите к Task "Zinocha Activated"

---

## Шаг 7: Расширенные настройки

### 7.1. Множественные wake words

Вы можете добавить дополнительные wake words:

1. В AutoVoice Event добавьте в "Command Filter":
   ```
   зиночка|зина|эй ассистент
   ```
2. Включите **"Use Regex"**

Теперь будут работать все три фразы: "Зиночка", "Зина", "Эй ассистент".

### 7.2. Контекстная активация

Создайте условия для работы wake word:

1. В Tasker Profile добавьте контекст (долгое нажатие на Profile)
2. Выберите условия:
   - **Time**: работать только днём (например, 08:00-22:00)
   - **Location**: работать только дома
   - **Wifi Connected**: работать только при подключении к домашнему Wi-Fi
   - **Battery Level**: отключать при низком заряде (<20%)

### 7.3. Голосовые ответы

Чтобы Зиночка отвечала "Слушаю вас" после активации:

1. Откройте Task "Zinocha Activated" в Tasker
2. Добавьте действие после "Play Activation Sound":
   ```
   Действие: Say
   Текст: Слушаю вас
   Язык: Russian
   Скорость: 1.0
   Тон: 1.0
   ```

---

## Резюме

✅ **Установлен** AutoVoice
✅ **Настроен** Continuous Mode с wake word "зиночка"
✅ **Создан** Tasker Profile для реакции на wake word
✅ **Оптимизирована** батарея
✅ **Проверена** работа с заблокированным экраном

Теперь ваш голосовой ассистент "Зиночка" полностью готов к работе!

---

## Дальнейшие шаги

- Создайте звуковые файлы (listening.mp3) для обратной связи
- Настройте TTS для голосовых ответов
- Протестируйте все сценарии использования
- См. полную документацию в `docs/voice_assistant_setup.md`
